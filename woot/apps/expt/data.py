# apps.expt.data

'''
Specific experiment and series information in the form of lists of prototype objects
'''
import os

### Image file extensions
allowed_img_extensions = (
	'.tiff',
)

allowed_data_extensions = (
	'.csv',
)

### image filename templates
templates = {
	'source':{
		'rx':r'^(?P<experiment>.+)_s(?P<series>.+)_ch(?P<channel>.+)_t(?P<t>[0-9]+)_z(?P<z>[0-9]+)\.(?P<extension>.+)$',
		'rv':r'{}_s{}_ch{}_t{}_z{}.tiff',
	},
	'mask':{
		'rx':r'^(?P<experiment>.+)_s(?P<series>.+)_ch(?P<channel>.+)_t(?P<t>[0-9]+)\.(?P<extension>.+)$',
		'rv':r'{}_s{}_ch{}_t{}.tiff',
	},
	'cp':{
		'rx':r'^(?P<experiment>.+)_s(?P<series>.+)_ch-(?P<channel>.+)_t(?P<t>[0-9]+)_z(?P<z>[0-9]+)_cp-(?P<secondary_channel>.+)\.(?P<extension>.+)$',
		'rv':r'{}_s{}_ch-{}_t{}_z{}_cp-{}.tiff',
	},
	'data':{
		'rx':r'^(?P<experiment>.+)_s(?P<series>.+)_(?P<id>[A-Z0-9]{8})_(?P<type>.+)\.csv$',
		'rv':r'{}_s{}_{}_{}.csv',
	},
	'pipeline':{
		'rx':r'^(?P<name>.+)_(?P<id>[A-Z0-9]{8})\.cppipe$',
		'rv':r'{}_{}.cppipe',
	}
}

### Default paths
default_paths = {
	'storage':'img/storage/',
	'composite':'img/composite/',
	'cp':'img/cp/',
	'ij':'ij/',
	'regions':'regions/',

	'plot':'plot/',
	'track':'track/',
	'data':'data/',
	'pipeline':'pipelines/',
	'video':'video/',
	'inf':'inf/',
}

# headers
headers = [
	'experiment',
	'series',
	'channel',
	'cell id',
	'row (pixels)',
	'row (um)',
	'column (pixels)'
	'column (um)',
	'z level (levels)',
	'z level (um)',
	'frame',
	't (min)',
	'row velocity (um/min)',
	'column velocity (um/min)',
	'Z velocity (um/min)',
	'total velocity (um/min)',
	'region name',
	'mask area (pixels)',
	'mask area (um^2)',
	'AreaShape_Compactness',
	'AreaShape_Eccentricity',
	'AreaShape_EulerNumber',
	'AreaShape_Extent',
	'AreaShape_FormFactor',
	'AreaShape_MajorAxisLength',
	'AreaShape_MaxFeretDiameter',
	'AreaShape_MaximumRadius',
	'AreaShape_MeanRadius',
	'AreaShape_MedianRadius',
	'AreaShape_MinFeretDiameter',
	'AreaShape_MinorAxisLength',
	'AreaShape_Orientation',
	'AreaShape_Perimeter',
	'AreaShape_Solidity',
	'AreaShape_Zernike_0_0',
	'AreaShape_Zernike_1_1',
	'AreaShape_Zernike_2_0',
	'AreaShape_Zernike_2_2',
	'AreaShape_Zernike_3_1',
	'AreaShape_Zernike_3_3',
	'AreaShape_Zernike_4_0',
	'AreaShape_Zernike_4_2',
	'AreaShape_Zernike_4_4',
	'AreaShape_Zernike_5_1',
	'AreaShape_Zernike_5_3',
	'AreaShape_Zernike_5_5',
	'AreaShape_Zernike_6_0',
	'AreaShape_Zernike_6_2',
	'AreaShape_Zernike_6_4',
	'AreaShape_Zernike_6_6',
	'AreaShape_Zernike_7_1',
	'AreaShape_Zernike_7_3',
	'AreaShape_Zernike_7_5',
	'AreaShape_Zernike_7_7',
	'AreaShape_Zernike_8_0',
	'AreaShape_Zernike_8_2',
	'AreaShape_Zernike_8_4',
	'AreaShape_Zernike_8_6',
	'AreaShape_Zernike_8_8',
	'AreaShape_Zernike_9_1',
	'AreaShape_Zernike_9_3',
	'AreaShape_Zernike_9_5',
	'AreaShape_Zernike_9_7',
	'AreaShape_Zernike_9_9',
]

cells = {
	'4':{
		'0': 66.5778683064016,
		'8': 83.1411428606771,
		'16': 91.5851651824646,
		'24': 143.548379470388,
		'32': 127.634645094711,
		'40': 176.999698668238,
		'48': 216.946419652079,
		'56': 192.588662954615,
		'64': 239.680325903046,
		'72': 140.950218755992,
	},
	'8':{
		'0': 43.19441945184120,
		'8': 47.41643037570530,
		'16': 76.32096670062160,
		'24': 88.0126892590147,
		'32': 98.08056146207540,
		'40': 104.9007329544710,
		'48': 85.73929876154940,
		'56': 103.27688259913900,
		'64': 226.6895096043990,
		'72': 173.7519880205640,
		'80': 223.76657896480100,
		'88': 109.44751394940200,
		'96': 192.26388207135300,
		'104': 157.18871439617400,
		'112': 189.01618136068800,
		'118': 29.229306395982700,
	},
	'9':{
		'0': 53.26229165490190,
		'8': 83.14113819301760,
		'16': 98.73010160420840,
		'24': 122.11354672099500,
		'32': 172.77767780736500,
		'40': 233.5096810967960,
		'48': 181.54646972615900,
		'56': 254.61973571611600,
		'64': 114.31906501539900,
		'72': 165.9575063149690,
		'80': 374.1351218685790,
		'88': 214.02347683280700,
		'96': 214.02347683280700,
		'104': 262.4142174217120,
		'112': 268.58484877197500,
		'118': 216.29686733027200,
	},
	'10':{
		'0': 133.8052692793880,
		'8': 104.57596288340500,
		'16': 115.61814529966500,
		'24': 117.56676572606400,
		'32': 65.92832442649440,
		'40': 145.49699183778100,
		'48': 160.76118517790500,
		'56': 214.7021988634140,
		'64': 105.342230579435,
	},
	'11':{
		'0': 53.9118348237203,
		'8': 70.1503392886963,
		'16': 111.396140629735,
		'24': 104.575968754445,
		'32': 95.8071763433584,
		'40': 113.344761165532,
		'48': 160.111654024663,
		'56': 194.862053579712,
		'64': 129.583265630508,
		'72': 193.562973222514,
		'80': 71.1246495565949,
		'88': 73.722810270991,
		'92': 61.0567767883098,
	},
	'20':{
		'49': 152.9667034723100,
		'56': 268.90961884304100,
		'64': 205.57945498507900,
		'72': 255.59404592931600,
		'80': 211.75008633534200,
		'88': 231.56106067039700,
		'96': 171.1538274520320,
		'104': 115.94291537073200,
		'112': 250.07295472118600,
		'118': 207.203305340411,
	}
}

protrusions = {
	'4':{
		# LEFT, RIGHT all the way down
		'44':[[46.39, 7.43],[27.86, -158.96]],
		'45':[[63.89, 17.30],[24.74, -165.96]],
		'46':[[68.31, 17.90],[46.17, -162.35]],
		'47':[[81.74, 14.89],[43.42, -172.06]],
		'48':[[79.70, 17.53],[55.58, -171.72]],
		'49':[[77.88, 15.64],[58.55, -172.15]],
		'50':[[76.40, 14.40],[62.94, -162.43]],
		'51':[[87.81, 17.68],[69.69, -160.44]],
		'52':[[88.55, 17.75],[70.38, -158.90]],
		'53':[[79.71, 14.04],[75.64, -157.73]],
		'54':[[78.86, 17.21],[80.80, -159.47]],
		'55':[[70.21, 17.40],[90.23, -161.03]],
		'56':[[67.49, 20.22],[88.60, -159.52]],
		'57':[[59.66, 18.23],[99.51, -160.84]],
		'58':[[62.72, 18.92],[93.17, -159.04]],
		'59':[[59.40, 23.83],[93.85, -157.44]],
		'60':[[34.73, 26.81],[94.03, -161.82]],
		'61':[[29.19, 13.88],[83.18, -162.51]],
		'62':[[35.46, 9.2],[75.87, -164.19]],
		'63':[[44.39, 10.38],[80.04, -163.3]],
		'64':[[44.40, 20.2],[71.47, -162.07]],
		'65':[[44.94, 20.85],[83.95, -157.1]],
		'66':[[52.6, 19.24],[80.93, -156.71]],
		'67':[[50.26, 24.7],[82.46, -157.17]],
		'68':[[56.22, 27.93],[78.52, -156.48]],
		'69':[[52.18, 27.38],[92.7, -156.48]],
		'70':[[52.33, 27.71],[84.99, -158.37]],
		'71':[[37.21, 22.66],[66.75, -156.76]],
	},
	'9':{
		'41':[[58.39, -42.57],[69.53, 139.67]],
		'42':[[63.12, -35.33],[60.37, 140.38]],
		'43':[[65.7, -36.96],[63.41, 144.30]],
		'44':[[63.5, -37.32],[62.8, 142.77]],
		'45':[[65.52, -38.18],[68.39, 138.85]],
		'46':[[71.38, -39.6],[67.36, 139.21]],
		'47':[[69.11, -37.95],[69.47, 139.09]],
		'48':[[61.32, -35.37],[74.65, 140.98]],
		'49':[[70.31, -33.69],[70.29, 140.19]],
		'50':[[74.93, -35.18],[67.02, 144.41]],
		'51':[[81.38, -30.66],[68.80, 147.46]],
		'52':[[85.76, -31.65],[63.41, 144.3]],
		'53':[[91.92, -30.75],[69.22, 147.69]],
		'54':[[78.77, -28.84],[64.4, 148.65]],
		'55':[[71.95, -30.49],[81, 142.78]],
		'56':[[76.1, -29.09],[78.39, 148.03]],
		'57':[[62.52, -30.26],[82.68, 147.85]],
		'58':[[52.48, -30.96],[84.52, 133.8]],
		'60':[[74.47, -32.94],[77.86, 137.6]],
		'61':[[112.53, -35.6],[77.6, 143.65]],
		'62':[[102.34, -33.85],[81.12, 146.31]],
		'63':[[114.9, -37.22],[86.28, 147.78]],
		'64':[[118.32, -37.79],[83.82, 144.22]],
		'65':[[136.3, -39.94],[82.25, 145.15]],
		'66':[[128.31, -37.72],[78.69, 130.88]],
		'67':[[132.83, -38.12],[78.81, 142.48]],
		'68':[[131.12, -37.87],[96.30, 142.59]],
		'69':[[141.51, -37.68],[94.4, 143.62]],
		'70':[[131.65, -38.52],[88.81, 144.16]],
		'71':[[110.5, -36.35],[103.45, 146.23]],
		'72':[[137.61, -37.62],[100.61, 144.1]],
		'73':[[137.92, -37.78],[97.6, 143.54]],
		'74':[[76.22, -38.07],[59.1, 137.4]],
		'75':[[69.54, -31.18],[83.07, 146.79]],
		'76':[[68.11, -32.41],[80.85, 146.6]],
		'77':[[69.07, -34.38],[82.11, 147.18]],
		'78':[[78.6, -36.72],[78.41, 144.08]],
		'79':[[68.02, -38.13],[66.8, 126.78]],
		'80':[[65.09, -31.49],[53.71, 125.91]],
		'81':[[72.53, -33.47],[59.77, 124.09]],
	}
}
